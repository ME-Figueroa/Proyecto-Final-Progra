@using ProyectoProgra.Clases

@page "/Mesas"
@inject ColaDeBoletosService<MesasPlatino> Servicio

<h3> Compra - Mesas Platino</h3>

@if (mensaje!=null)
{
    <p><b>@mensaje</b></p>
}

<EditForm Model="boleto" OnValidSubmit="AgregarABoleta">
    <InputText @bind-Value="boleto.nombres" placeholder="Nombres" class="form-control mb-2" />
    <InputText @bind-Value="boleto.apellidos" placeholder="Apellidos" class="form-control mb-2" />
    <InputText @bind-Value="boleto.dpi" placeholder="DPI" class="form-control mb-2" />
    <InputText @bind-Value="boleto.correoElectronico" placeholder="Correo" class="form-control mb-2" />
    <InputText @bind-Value="boleto.NumeroMesa" placeholder="Número de mesa" class="form-control mb-2" />
    <button class="btn btn-primary" type="submit">Unirse a la cola</button>
</EditForm>

<br />
<button class="btn btn-success" @onclick="Procesar">Procesar siguiente</button>

<h5 class="mt-4">Boletos restantes: @Servicio.Restantes()</h5>
<h5>Personas en cola: @Servicio.EnCola()</h5>

@code {
    MesasPlatino boleto = new MesasPlatino();
    string mensaje = "";

    void AgregarABoleta()
    {
        Servicio.Encolar(boleto);
        mensaje = "Agregado a la cola.";
        boleto = new(); // limpiar
    }

    void Procesar()
    {
        mensaje = Servicio.Procesar();
    }
}
